<!doctype html>
<html lang="uk">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Для тебе</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="scene" aria-label="Валентинка">
      <svg class="heart" viewBox="0 0 600 540" role="img" aria-label="Серце з текстом по контуру">
        <defs>
          <path
            id="heartPath"
            d="M300 520 C120 400 40 260 80 160 C120 60 240 60 300 140 C360 60 480 60 520 160 C560 260 480 400 300 520 Z"
          />
        </defs>

        <g class="ring r1">
          <text>
            <textPath href="#heartPath" startOffset="0%" data-speed="0.8">
              i love you • я тебе люблю • i love you • я тебе люблю • i love you • я тебе люблю •
            </textPath>
          </text>
        </g>
        <g class="ring r2">
          <text>
            <textPath href="#heartPath" startOffset="12%" data-speed="1">
              i love you • я тебе люблю • i love you • я тебе люблю • i love you • я тебе люблю •
            </textPath>
          </text>
        </g>
        <g class="ring r3">
          <text>
            <textPath href="#heartPath" startOffset="24%" data-speed="1.2">
              i love you • я тебе люблю • i love you • я тебе люблю • i love you • я тебе люблю •
            </textPath>
          </text>
        </g>
        <g class="ring r4">
          <text>
            <textPath href="#heartPath" startOffset="36%" data-speed="1.4">
              i love you • я тебе люблю • i love you • я тебе люблю • i love you • я тебе люблю •
            </textPath>
          </text>
        </g>
        <g class="ring r5">
          <text>
            <textPath href="#heartPath" startOffset="48%" data-speed="1.6">
              i love you • я тебе люблю • i love you • я тебе люблю • i love you • я тебе люблю •
            </textPath>
          </text>
        </g>
      </svg>

      <div class="caption">
        <p>Ти моє серце</p>
      </div>
    </main>

    <script>
      const rings = Array.from(document.querySelectorAll("textPath"));
      const baseOffsets = rings.map((ring) => parseFloat(ring.getAttribute("startOffset")) || 0);
      const speeds = rings.map((ring) => parseFloat(ring.dataset.speed) || 1);
      let start = null;

      function tick(ts) {
        if (!start) start = ts;
        const t = (ts - start) / 1000;
        rings.forEach((ring, i) => {
          const offset = (baseOffsets[i] + t * speeds[i] * 6) % 100;
          ring.setAttribute("startOffset", `${offset}%`);
        });
        requestAnimationFrame(tick);
      }

      requestAnimationFrame(tick);
    </script>
  </body>
</html>
